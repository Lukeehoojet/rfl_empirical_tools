{"params":{"repoId":"207181317"},"requestedAt":"2024-05-28T19:34:03.317+00:00","finishedAt":"2024-05-28T19:34:03.357+00:00","spent":0.04,"sql":"WITH pr_with_merged_at AS (\n    SELECT\n        number, DATE_FORMAT(created_at, '%Y-%m-01') AS t_month, created_at AS merged_at\n    FROM\n        github_events ge\n    WHERE\n        type = 'PullRequestEvent'\n        -- Considering that some repositories accept the code of the contributor by closing the PR and push commit directly,\n        -- here is not distinguished whether it is the merged event.\n        -- See: https://github.com/mongodb/mongo/pulls?q=is%3Apr+is%3Aclosed\n        AND action = 'closed'\n        AND repo_id = 207181317\n), pr_with_opened_at AS (\n    SELECT\n        number, created_at AS opened_at\n    FROM\n        github_events ge\n    WHERE\n        type = 'PullRequestEvent'\n        AND action = 'opened'\n        -- Exclude Bots\n        -- AND actor_login NOT LIKE '%bot%'\n        -- AND actor_login NOT IN (SELECT login FROM blacklist_users bu)\n        AND repo_id = 207181317\n), tdiff AS (\n    SELECT\n        t_month,\n        (UNIX_TIMESTAMP(pwm.merged_at) - UNIX_TIMESTAMP(pwo.opened_at)) AS diff\n    FROM\n        pr_with_opened_at pwo\n        JOIN pr_with_merged_at pwm ON pwo.number = pwm.number AND pwm.merged_at > pwo.opened_at\n), tdiff_with_rank AS (\n    SELECT\n        tdiff.t_month,\n        diff  / 60 / 60 AS diff,\n        ROW_NUMBER() OVER (PARTITION BY tdiff.t_month ORDER BY diff) AS r,\n        COUNT(*) OVER (PARTITION BY tdiff.t_month) AS cnt,\n        FIRST_VALUE(diff / 60 / 60) OVER (PARTITION BY tdiff.t_month ORDER BY diff) AS p0,\n        FIRST_VALUE(diff / 60 / 60)  OVER (PARTITION BY tdiff.t_month ORDER BY diff DESC) AS p100\n    FROM tdiff\n), tdiff_p25 AS (\n    SELECT\n        t_month, diff AS p25\n    FROM\n        tdiff_with_rank tr\n    WHERE\n        r = ROUND(cnt * 0.25)\n), tdiff_p50 AS (\n    SELECT\n        t_month, diff AS p50\n    FROM\n        tdiff_with_rank tr\n    WHERE\n        r = ROUND(cnt * 0.5)\n), tdiff_p75 AS (\n    SELECT\n        t_month, diff AS p75\n    FROM\n        tdiff_with_rank tr\n    WHERE\n        r = ROUND(cnt * 0.75)\n)\nSELECT\n    tr.t_month AS event_month,\n    p0,\n    p25,\n    p50,\n    p75,\n    p100\nFROM tdiff_with_rank tr\nLEFT JOIN tdiff_p25 p25 ON tr.t_month = p25.t_month\nLEFT JOIN tdiff_p50 p50 ON tr.t_month = p50.t_month\nLEFT JOIN tdiff_p75 p75 ON tr.t_month = p75.t_month\nWHERE r = 1\nORDER BY event_month\n;","fields":[{"name":"event_month","columnType":253},{"name":"p0","columnType":246},{"name":"p25","columnType":246},{"name":"p50","columnType":246},{"name":"p75","columnType":246},{"name":"p100","columnType":246}],"data":[{"event_month":"2020-09-01","p0":0.00222222,"p25":0.00222222,"p50":1.41888889,"p75":146.83416667,"p100":176.67694444},{"event_month":"2020-10-01","p0":5.66777778,"p25":5.66777778,"p50":13.70833333,"p75":13.70833333,"p100":26.18111111},{"event_month":"2020-11-01","p0":0.07972222,"p25":0.16138889,"p50":1.39055556,"p75":10.25166667,"p100":1668.51916667},{"event_month":"2020-12-01","p0":0.02083333,"p25":0.14027778,"p50":0.44638889,"p75":5.91444444,"p100":47.61694444},{"event_month":"2021-01-01","p0":0.5075,"p25":2.24916667,"p50":8.71777778,"p75":39.87555556,"p100":3000.24638889},{"event_month":"2021-02-01","p0":0.20944444,"p25":2.02138889,"p50":7.56138889,"p75":9.26833333,"p100":317.82277778},{"event_month":"2021-03-01","p0":0.03027778,"p25":0.29166667,"p50":1.535,"p75":72.71694444,"p100":4030.15583333},{"event_month":"2021-04-01","p0":0.08416667,"p25":0.41,"p50":4.47277778,"p75":38.32027778,"p100":657.4775},{"event_month":"2021-05-01","p0":0.04527778,"p25":1.05166667,"p50":6.36805556,"p75":93.96777778,"p100":274.18222222},{"event_month":"2021-06-01","p0":0.0025,"p25":1.77972222,"p50":10.12972222,"p75":37.43638889,"p100":387.40361111},{"event_month":"2021-07-01","p0":0.03333333,"p25":0.39027778,"p50":0.8725,"p75":48.99277778,"p100":1966.81916667},{"event_month":"2021-08-01","p0":1.24972222,"p25":4.16916667,"p50":20.63833333,"p75":682.09111111,"p100":913.93805556},{"event_month":"2021-09-01","p0":0.00472222,"p25":0.02833333,"p50":0.53055556,"p75":15.91861111,"p100":29.91972222},{"event_month":"2021-10-01","p0":0.00416667,"p25":0.37333333,"p50":1.19805556,"p75":54.2825,"p100":1227.34527778},{"event_month":"2021-11-01","p0":0.35472222,"p25":0.59166667,"p50":5.26972222,"p75":85.05972222,"p100":2995.39833333},{"event_month":"2021-12-01","p0":0.30694444,"p25":0.44888889,"p50":0.62666667,"p75":2.13638889,"p100":56.31055556},{"event_month":"2022-01-01","p0":0.15055556,"p25":0.5475,"p50":1.80333333,"p75":24.60444444,"p100":838.665},{"event_month":"2022-02-01","p0":0.37805556,"p25":0.50166667,"p50":0.92944444,"p75":26.49916667,"p100":5877.16555556},{"event_month":"2022-03-01","p0":0.40138889,"p25":0.83916667,"p50":10.33111111,"p75":141.59611111,"p100":7619.47416667},{"event_month":"2022-04-01","p0":0.44944444,"p25":0.64361111,"p50":8.85611111,"p75":157.75777778,"p100":460.45305556},{"event_month":"2022-05-01","p0":0.0975,"p25":0.49861111,"p50":3.33972222,"p75":48.47694444,"p100":2039.28972222},{"event_month":"2022-06-01","p0":0.52444444,"p25":0.90944444,"p50":8.98333333,"p75":35.04222222,"p100":309.12305556},{"event_month":"2022-07-01","p0":0.01916667,"p25":4.16694444,"p50":17.28194444,"p75":120.03305556,"p100":9653.49861111},{"event_month":"2022-08-01","p0":0.40555556,"p25":0.46388889,"p50":0.47388889,"p75":1.48055556,"p100":4.03},{"event_month":"2022-09-01","p0":1.00944444,"p25":1.42361111,"p50":3.55805556,"p75":1032.71583333,"p100":4392.51027778},{"event_month":"2022-10-01","p0":0.06166667,"p25":0.53305556,"p50":5.35305556,"p75":95.74944444,"p100":12070.6375},{"event_month":"2022-11-01","p0":1063.17527778,"p25":null,"p50":1063.17527778,"p75":1063.17527778,"p100":1063.17527778},{"event_month":"2023-01-01","p0":0.15944444,"p25":0.3125,"p50":399.7675,"p75":3619.45611111,"p100":13863.58194444},{"event_month":"2023-02-01","p0":9.37722222,"p25":14.44861111,"p50":18.66888889,"p75":18.83222222,"p100":3694.30833333},{"event_month":"2023-03-01","p0":0.01805556,"p25":1.07361111,"p50":192.99722222,"p75":1529.00388889,"p100":5039.46305556},{"event_month":"2023-04-01","p0":0.64722222,"p25":0.64722222,"p50":86.945,"p75":95.64138889,"p100":4837.55444444},{"event_month":"2023-06-01","p0":0.36694444,"p25":0.36694444,"p50":0.36694444,"p75":6013.82472222,"p100":6013.82472222},{"event_month":"2023-07-01","p0":0.33388889,"p25":0.33388889,"p50":12.85777778,"p75":12.85777778,"p100":55.07444444},{"event_month":"2023-08-01","p0":23.50138889,"p25":2987.46277778,"p50":3096.65027778,"p75":6939.05861111,"p100":13925.02611111},{"event_month":"2023-09-01","p0":1.00472222,"p25":1.00472222,"p50":646.23555556,"p75":646.23555556,"p100":8367.59194444},{"event_month":"2023-11-01","p0":20165.04888889,"p25":null,"p50":20165.04888889,"p75":20165.04888889,"p100":20165.04888889},{"event_month":"2024-01-01","p0":11618.55388889,"p25":11618.55388889,"p50":11618.55388889,"p75":18897.28916667,"p100":18897.28916667},{"event_month":"2024-03-01","p0":19903.04194444,"p25":null,"p50":19903.04194444,"p75":19903.04194444,"p100":19903.04194444},{"event_month":"2024-04-01","p0":44.19333333,"p25":44.19333333,"p50":44.19333333,"p75":2042.82861111,"p100":2042.82861111},{"event_month":"2024-05-01","p0":10655.90916667,"p25":null,"p50":10655.90916667,"p75":10655.90916667,"p100":10655.90916667}],"expiresAt":"2024-05-29T19:34:03.357+00:00","refresh":true}